syntax = "proto3";

package conf;

option go_package = "github.com/tx7do/kratos-bootstrap/api/gen/go/conf/v1;conf";

// 链路追踪
message Tracer {
  // exporter 名称，例如: "otlp-grpc", "otlp-http", "zipkin", "stdout"
  string exporter = 1;

  // 目标 endpoint，例如 "localhost:4317" 或 "http://host:9411/api/v2/spans"
  string endpoint = 2;

  double sampler = 3; // 采样率，默认：1.0
  string env = 4; // 运行环境：dev、debug、product
  bool insecure = 5;

  // 批处理/Span processor 配置（可选）
  optional BatcherOptions batcher_options = 6;

  // 是否包含 W3C TraceContext 传播（nil 表示未配置）
  optional bool enable_trace_context = 7;

  // 是否包含 Baggage 传播（nil 表示未配置）
  optional bool enable_baggage = 8;
}

message BatcherOptions {
  bool enabled = 1; // 是否启用 BatchSpanProcessor（默认 true）
  uint32 max_queue_size = 2;
  uint32 max_export_batch_size = 3;
  uint32 schedule_delay_millis = 4;
  uint32 export_timeout_millis = 5;
}
